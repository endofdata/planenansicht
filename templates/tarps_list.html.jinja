{% extends "layout.html.jinja" %}

{% block styles %}
<link rel="stylesheet" href="/static/css/tarps_list.css" />
{% endblock %}

{% block content %}
	<div class="table">
		<form action="{{ ROUTING.ROOT_ENDPOINT }}" method="post">
			<div class="table">
				<div class="row header">
					<div class="filter-label">Filter</div>
					<div class="filter-value">Wert</div>
				</div>
				{% for s in selection.selectors %}
				<div class="row filter">
					<div class="filter-label">
						<select id="select_by_{{ loop.index0 }}" name="select_by_{{ loop.index0 }}">
							<option value="None">- alle -</option>
							<option value="{{ TARPS_PROPS.TARP_NUMBER }}">Nummer</option>
							<option value="{{ TARPS_PROPS.CAT_NAME }}">Kategorie</option>
							<option value="{{ TARPS_PROPS.TYPE_NAME }}">Planen-Typ</option>
							<option value="{{ TARPS_PROPS.DMG_CODE }}">Schaden</option>
						</select>
					</div>
					<div class="filter-value">
						<input id="select_value_{{ loop.index0 }}" name="select_value_{{ loop.index0 }}" />
					</div>
				</div>
				{% endfor %}
			</div>
			<div class="table">
				<div class="row header">
					<div class="filter-label">Sortierung</div>
					<div class="filter-value">Absteigend</div>
				</div>
				{% for o in selection.sequence %}
				<div class="row filter">
					<div class="filter-label">
						<select id="order_by_{{ loop.index0 }}" name="order_by_{{ loop.index0 }}">
							<option value="None">-- unsortiert --</option>
							<option value="{{ TARPS_PROPS.TARP_NUMBER }}">Nummer</option>
							<option value="{{ TARPS_PROPS.CAT_NAME }}">Kategorie</option>
							<option value="{{ TARPS_PROPS.TYPE_NAME }}">Planen-Typ</option>
							<option value="{{ TARPS_PROPS.DMG_CODE }}">Schaden</option>
						</select>
					</div>
					<div class="filter-value">
						<input type="checkbox" id="order_dir_{{ loop.index0 }}" name="order_dir_{{ loop.index0 }}" />
					</div>
				</div>
				{% endfor %}
			</div>
			<div class="table">
				<div class="row filter">
					<div class="buttons">
						<button type="submit">Aktualisieren</button>
					</div>
				</div>
			</div>
		</form>
	</div>
	<table class="tarps-list">
	<thead>
		<tr>
			<th class="numeric">Nr.</th>
			<th>Typ</th>
			<th>Kat.</th>
			<th>Anmerkung</th>
			<th>Schaden</th>
		</tr>
	</thead>
	<tbody>
		{% for tarp in tarp_list %}
		<tr>
			<td class="numeric">{{ tarp.number }}</td>
			<td>{{ tarp.category.tarp_type.name }}</td>
			<td>{{ tarp.category.name }}</td>
			<td>{{ tarp.annotation }}</td>
			<td>
				{% for dmg in tarp.damages %}
				{{ dmg.code }}
				{% endfor %}
			</td>
		</tr>
		{% endfor %}
		</tbody>
	</table>
{% endblock %}

{% block script %}
	{% include 'selection_script.jinja' %}
{% endblock %}
