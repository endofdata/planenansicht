{% extends "layout.html.jinja" %}

{% block styles %}
<link rel="stylesheet" href="/static/css/tarps_list.css" />
{% endblock %}

{% block content %}
<div>
	<form action="{{ ROUTING.ROOT_ENDPOINT }}" method="post">
		<table class="dialog filter">
			<thead>
				<tr>
					<th>Filter</th>
					<th>Wert</th>
				</tr>
			</thead>
			<tbody>
				{% for s in selection.selectors %}
				<tr>
					<td>
						<select id="select_by_{{ loop.index0 }}" name="select_by_{{ loop.index0 }}">
							<option value="None">- alle -</option>
							<option value="{{ TARPS_PROPS.TARP_NUMBER }}">Nummer</option>
							<option value="{{ TARPS_PROPS.CAT_NAME }}">Kategorie</option>
							<option value="{{ TARPS_PROPS.TYPE_NAME }}">Planen-Typ</option>
							<option value="{{ TARPS_PROPS.DMG_CODE }}">Schaden</option>
						</select>
					</td>
					<td>
						<input id="select_value_{{ loop.index0 }}" name="select_value_{{ loop.index0 }}" />
					</td>
				</tr>
				{% endfor %}
				<tr>
					<th>Sortierung</th>
					<th>Absteigend</th>
				</tr>
				{% for o in selection.sequence %}
				<tr>
					<td>
						<select id="order_by_{{ loop.index0 }}" name="order_by_{{ loop.index0 }}">
							<option value="None">-- unsortiert --</option>
							<option value="{{ TARPS_PROPS.TARP_NUMBER }}">Nummer</option>
							<option value="{{ TARPS_PROPS.CAT_NAME }}">Kategorie</option>
							<option value="{{ TARPS_PROPS.TYPE_NAME }}">Planen-Typ</option>
							<option value="{{ TARPS_PROPS.DMG_CODE }}">Schaden</option>
						</select>
					</td>
					<td>
						<input type="checkbox" id="order_dir_{{ loop.index0 }}" name="order_dir_{{ loop.index0 }}" />
					</td>
				</tr>
				{% endfor %}
				<tr class="buttonpanel">
					<td><button type="submit">Aktualisieren</button></td>
				</tr>
			</tbody>
		</table>
	</form>
</div>
<table class="tarps-list">
	<thead>
		<tr>
			<th class="numeric">Nr.</th>
			<th>Typ</th>
			<th>Kat.</th>
			<th>Anmerkung</th>
			<th>Schaden</th>
		</tr>
	</thead>
	<tbody>
		{% for tarp in tarp_list %}
		<tr>
			<td class="numeric">{{ tarp.number }}</td>
			<td>{{ tarp.category.tarp_type.name }}</td>
			<td>{{ tarp.category.name }}</td>
			<td>{{ tarp.annotation }}</td>
			<td>
				{% for dmg in tarp.damages %}
				{{ dmg.code }}
				{% endfor %}
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
{% endblock %}

{% block script %}
{% include 'selection_script.jinja' %}
{% endblock %}